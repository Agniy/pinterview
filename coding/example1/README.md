# üìù –ó–∞–¥–∞—á–∞: –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

–í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞. –õ–æ–≥–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã, –≥–¥–µ –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–¥–Ω–æ–º HTTP-–∑–∞–ø—Ä–æ—Å–µ.

### –§–æ—Ä–º–∞—Ç –ª–æ–≥–∞

```
127.0.0.1 - - [10/Oct/2023:13:55:36 +0000] "GET /api/users HTTP/1.1" 200 1234
192.168.1.1 - - [10/Oct/2023:13:55:37 +0000] "POST /api/login HTTP/1.1" 401 89
10.0.0.1 - - [10/Oct/2023:13:55:38 +0000] "GET /api/products HTTP/1.1" 200 5678
```

–ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- IP –∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞
- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞
- HTTP –º–µ—Ç–æ–¥ –∏ –ø—É—Ç—å
- –°—Ç–∞—Ç—É—Å –∫–æ–¥ –æ—Ç–≤–µ—Ç–∞
- –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ –≤ –±–∞–π—Ç–∞—Ö

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –£—Ä–æ–≤–µ–Ω—å 1 (–ë–∞–∑–æ–≤—ã–π - 20 –º–∏–Ω—É—Ç)

–†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–ª–∞—Å—Å `LogParser`, –∫–æ—Ç–æ—Ä—ã–π:
1. –ß–∏—Ç–∞–µ—Ç –ª–æ–≥-—Ñ–∞–π–ª –ø–æ—Å—Ç—Ä–æ—á–Ω–æ
2. –ü–∞—Ä—Å–∏—Ç –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
3. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π

**–û–∂–∏–¥–∞–µ–º—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
```python
parser = LogParser('access.log')
logs = parser.parse()
for log_entry in logs:
    print(log_entry)
```

### –£—Ä–æ–≤–µ–Ω—å 2 (–°—Ä–µ–¥–Ω–∏–π - 20 –º–∏–Ω—É—Ç)

–î–æ–±–∞–≤—å—Ç–µ –∫–ª–∞—Å—Å `LogAnalyzer`, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç:
1. –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∞–º
2. –ù–∞—Ö–æ–¥–∏—Ç—å —Ç–æ–ø-N —Å–∞–º—ã—Ö –ø–æ—Å–µ—â–∞–µ–º—ã—Ö URL
3. –û–ø—Ä–µ–¥–µ–ª—è—Ç—å IP –∞–¥—Ä–µ—Å–∞ —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤
4. –í—ã—á–∏—Å–ª—è—Ç—å –æ–±—â–∏–π –æ–±—ä–µ–º –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–û–∂–∏–¥–∞–µ–º—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
```python
analyzer = LogAnalyzer(logs)
print(analyzer.count_by_status())
print(analyzer.top_urls(n=5))
print(analyzer.top_ips(n=3))
print(analyzer.total_bytes())
```

### –£—Ä–æ–≤–µ–Ω—å 3 (–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π - 20 –º–∏–Ω—É—Ç)

–£—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤—É–π—Ç–µ —Å–∏—Å—Ç–µ–º—É:
1. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ (streaming –æ–±—Ä–∞–±–æ—Ç–∫–∞)
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –¥–∞—Ç–µ/–≤—Ä–µ–º–µ–Ω–∏
3. –î–æ–±–∞–≤—å—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ JSON
4. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

## üéì –ß—Ç–æ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç—Å—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (30%)
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–ª–∞—Å—Å–∞–º–∏
- –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å –∫–æ–¥–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ (30%)
- –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ —Å—Ç–∏–ª—å
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (docstrings)
- Type hints

### –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (20%)
- –í—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö
- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ—Å—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
- –†–∞–±–æ—Ç–∞ —Å –ø–∞–º—è—Ç—å—é –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–∞—Ö

### –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å (20%)
- –õ–µ–≥–∫–æ—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
- –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

## üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏ –∏ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è

1. **–ö–∞–∫ –ø–∞—Ä—Å–∏—Ç—å —Å—Ç—Ä–æ–∫—É?** –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –∏–ª–∏ split —Å —É—á–µ—Ç–æ–º —Ñ–æ—Ä–º–∞—Ç–∞
2. **–ö–∞–∫–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?** Counter, defaultdict –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã
3. **–ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã?** –ß–∏—Ç–∞—Ç—å –ø–æ—Å—Ç—Ä–æ—á–Ω–æ, –Ω–µ –∑–∞–≥—Ä—É–∂–∞—è –≤–µ—Å—å —Ñ–∞–π–ª –≤ –ø–∞–º—è—Ç—å
4. **–ù—É–∂–Ω–∞ –ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è?** –î–∞, –Ω–µ –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º–∏
5. **–ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å?** –ü–æ–¥—É–º–∞–π—Ç–µ –æ —Ç–æ–º, –∫–∞–∫ –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –æ—Ç –ª–æ–≥–∏–∫–∏

## üîÑ –í–æ–∑–º–æ–∂–Ω—ã–µ —É—Å–ª–æ–∂–Ω–µ–Ω–∏—è

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫ –≤ —Ñ–∞–π–ª–µ (tail -f)
2. **–ê–ª–µ—Ä—Ç—ã** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö (–º–Ω–æ–≥–æ 500 –æ—à–∏–±–æ–∫)
3. **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
4. **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
5. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ë–î –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏

---

# üìñ –†–µ—à–µ–Ω–∏–µ —Å –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º

## –®–∞–≥ 1: –ê–Ω–∞–ª–∏–∑ –∑–∞–¥–∞—á–∏

### –ö–ª—é—á–µ–≤—ã–µ –∞—Å–ø–µ–∫—Ç—ã:
1. **–ü–∞—Ä—Å–∏–Ω–≥** - –Ω—É–∂–Ω–æ –∏–∑–≤–ª–µ—á—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç—Ä–æ–∫–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞
2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ —É–¥–æ–±–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
3. **–ê–≥—Ä–µ–≥–∞—Ü–∏—è** - —Å–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–æ–ª—å—à–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏

### –†–µ—à–µ–Ω–∏—è –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:

**1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SRP)**
- `LogEntry` - –º–æ–¥–µ–ª—å –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏
- `LogParser` - –ø–∞—Ä—Å–∏–Ω–≥ —Ñ–∞–π–ª–∞
- `LogAnalyzer` - –∞–Ω–∞–ª–∏–∑ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `LogFilter` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**2. –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö**
- `dataclass` –¥–ª—è LogEntry - —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã
- `Counter` –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ - –æ–ø—Ç–∏–º–∞–ª–µ–Ω –¥–ª—è —á–∞—Å—Ç–æ—Ç–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- `defaultdict` –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
- Generator –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ - —ç–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏

**3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω - –ø–æ–Ω—è—Ç–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
- –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç - –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–±–æ—Ç—É

## –®–∞–≥ 2: –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–£—Ä–æ–≤–µ–Ω—å 1)

### –°–æ–∑–¥–∞–µ–º –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

```python
@dataclass
class LogEntry:
    ip: str
    timestamp: datetime
    method: str
    path: str
    status: int
    size: int
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- `dataclass` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç `__init__`, `__repr__`, `__eq__`
- Type hints —É–ª—É—á—à–∞—é—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
- Datetime –¥–ª—è –≤—Ä–µ–º–µ–Ω–∏ - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã

### –ü–∞—Ä—Å–µ—Ä

```python
class LogParser:
    def parse_line(self, line: str) -> Optional[LogEntry]:
        # –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
        # –í–æ–∑–≤—Ä–∞—Ç LogEntry –∏–ª–∏ None
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- Regex - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- Optional[LogEntry] - —è–≤–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å None
- –ú–µ—Ç–æ–¥ parse_line –æ—Ç–¥–µ–ª—å–Ω–æ - –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

## –®–∞–≥ 3: –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö (–£—Ä–æ–≤–µ–Ω—å 2)

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```python
class LogAnalyzer:
    def __init__(self, logs: List[LogEntry]):
        self.logs = logs
    
    def count_by_status(self) -> Counter:
        return Counter(log.status for log in self.logs)
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- Counter - –æ–ø—Ç–∏–º–∞–ª–µ–Ω –¥–ª—è —á–∞—Å—Ç–æ—Ç–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ O(n)
- Generator expression - —ç–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏
- –ü—Ä–æ—Å—Ç–æ–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π API

## –®–∞–≥ 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–£—Ä–æ–≤–µ–Ω—å 3)

### Streaming –æ–±—Ä–∞–±–æ—Ç–∫–∞

```python
def parse_stream(self) -> Iterator[LogEntry]:
    with open(self.filepath) as f:
        for line in f:
            entry = self.parse_line(line)
            if entry:
                yield entry
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- Generator - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –ø–æ—Å—Ç—Ä–æ—á–Ω–æ
- –ù–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤–µ—Å—å —Ñ–∞–π–ª –≤ –ø–∞–º—è—Ç—å
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å –±–æ–ª—å—à–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏ (GB+)

### Async –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

```python
async def process_files(files: List[str]) -> Dict[str, Stats]:
    tasks = [process_file_async(f) for f in files]
    return await asyncio.gather(*tasks)
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- Async –¥–ª—è I/O –æ–ø–µ—Ä–∞—Ü–∏–π - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
- gather - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ü–æ–¥—Ö–æ–¥–∏—Ç –∫–æ–≥–¥–∞ I/O bound (—á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤)

## üé® –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. Strategy Pattern
–†–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ª–æ–≥–æ–≤:
```python
class NginxLogParser(LogParser):
    ...

class ApacheLogParser(LogParser):
    ...
```

### 2. Builder Pattern
–î–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤:
```python
filter = (LogFilterBuilder()
    .by_status(200)
    .by_date_range(start, end)
    .by_path_pattern('/api/*')
    .build())
```

### 3. Factory Pattern
–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–æ–≤:
```python
parser = LogParserFactory.create(log_format='nginx')
```

## üìä –°–ª–æ–∂–Ω–æ—Å—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤

- **–ü–∞—Ä—Å–∏–Ω–≥**: O(n) –≥–¥–µ n - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫
- **count_by_status**: O(n) —Å Counter
- **top_urls**: O(n log k) –≥–¥–µ k - —Ç–æ–ø-N (–∏—Å–ø–æ–ª—å–∑—É–µ–º heapq)
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: O(n) –æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
1. –ü–∞—Ä—Å–∏–Ω–≥ –≤–∞–ª–∏–¥–Ω—ã—Ö —Å—Ç—Ä–æ–∫
2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö —Å—Ç—Ä–æ–∫
3. –ü—É—Å—Ç–æ–π —Ñ–∞–π–ª
4. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
5. –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ (0 –±–∞–π—Ç, –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã)

### –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞:
```python
def test_parse_valid_line():
    line = '127.0.0.1 - - [10/Oct/2023:13:55:36 +0000] "GET /api HTTP/1.1" 200 1234'
    parser = LogParser('dummy')
    entry = parser.parse_line(line)
    
    assert entry.ip == '127.0.0.1'
    assert entry.status == 200
    assert entry.size == 1234
```

---

# üèÜ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏

## –û—Ç–ª–∏—á–Ω–æ (90-100%)
- ‚úÖ –í—Å–µ —Ç—Ä–∏ —É—Ä–æ–≤–Ω—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –±–æ–ª—å—à–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- ‚úÖ Type hints –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–π –∫–æ–¥

## –•–æ—Ä–æ—à–æ (70-89%)
- ‚úÖ –£—Ä–æ–≤–µ–Ω—å 1 –∏ 2 –ø–æ–ª–Ω–æ—Å—Ç—å—é
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–π –∫–æ–¥
- ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ–ø—Ç–∏–º–∞–ª–µ–Ω –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤

## –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ (50-69%)
- ‚úÖ –£—Ä–æ–≤–µ–Ω—å 1 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö
- ‚ö†Ô∏è –ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚ö†Ô∏è –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚ö†Ô∏è –ù–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

## –ù–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ (<50%)
- ‚ùå –ö–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –º–∞–ª–∞—è —á–∞—Å—Ç—å
- ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫
- ‚ùå –ù–µ–ø–æ–Ω–∏–º–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

---

# üíª –ò—Ç–æ–≥–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

–°–º. —Ñ–∞–π–ª—ã –≤ —ç—Ç–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:
- `log_analyzer.py` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- `sample_logs.txt` - –ø—Ä–∏–º–µ—Ä –ª–æ–≥-—Ñ–∞–π–ª–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `test_log_analyzer.py` - unit —Ç–µ—Å—Ç—ã
- `main.py` - –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## –ó–∞–ø—É—Å–∫

```bash
# –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
python main.py

# –° —Ç–µ—Å—Ç–æ–≤—ã–º —Ñ–∞–π–ª–æ–º
python main.py sample_logs.txt

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
python -m pytest test_log_analyzer.py
```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏—è

### üöÄ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å

–î–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏:

#### `log_analyzer_advanced.py`

–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞–Ω–∞–ª–∏–∑–∞:

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–π
python3 log_analyzer_advanced.py
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –∞–ª–µ—Ä—Ç–æ–≤** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö
- ‚úÖ **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã** - —Å–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è, regex, —Ü–µ–ø–æ—á–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- ‚úÖ **–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã** - –∞–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º, –ø–æ—á–∞—Å–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö** - JSON, CSV, Markdown –æ—Ç—á–µ—Ç—ã

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```python
from log_analyzer_advanced import (
    AsyncLogParser, 
    AlertManager, 
    AdvancedLogFilter,
    TimeSeriesAggregator
)

# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
results = await process_multiple_files(['log1.txt', 'log2.txt'])

# –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
filtered = (AdvancedLogFilter(logs)
            .by_path_regex(r'^/api/')
            .by_custom_condition(lambda e: e.status >= 400)
            .get_logs())

# –í—Ä–µ–º–µ–Ω–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è
aggregator = TimeSeriesAggregator(logs)
hourly_stats = aggregator.get_hourly_stats()
```

#### `log_monitor_demo.py`

Real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ (–∞–Ω–∞–ª–æ–≥ tail -f):

```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
python3 log_monitor_demo.py sample_logs.txt

# –†–µ–∂–∏–º —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
python3 log_monitor_demo.py
# –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º 2
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üì° –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üö® –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö
- üìä –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã
- üé¨ –†–µ–∂–∏–º –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –ª–æ–≥–æ–≤

#### `log_visualizer.py`

–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤:

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ—Ç—á–µ—Ç–æ–≤
python3 log_visualizer.py
```

**–ß—Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è:**
- üìä **ASCII –≥—Ä–∞—Ñ–∏–∫–∏** –≤ –∫–æ–Ω—Å–æ–ª–∏ (—Å—Ç–æ–ª–±—á–∞—Ç—ã–µ, –ª–∏–Ω–µ–π–Ω—ã–µ, –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã)
- üìà **HTML –æ—Ç—á–µ—Ç—ã** —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ Chart.js –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
- üìâ **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏** –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- üì¶ **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è** —Ä–∞–∑–º–µ—Ä–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤

**–§–æ—Ä–º–∞—Ç—ã –æ—Ç—á–µ—Ç–æ–≤:**
- `visual_report.html` - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π HTML —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
- `stats_export.json` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ JSON
- `logs_export.csv` - –ª–æ–≥–∏ –≤ CSV
- `report.md` - –æ—Ç—á–µ—Ç –≤ Markdown

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

```
log_analyzer.py          - –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã (–ø–∞—Ä—Å–∏–Ω–≥, –∞–Ω–∞–ª–∏–∑)
‚îú‚îÄ‚îÄ LogEntry            - –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ LogParser           - –ü–∞—Ä—Å–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤
‚îî‚îÄ‚îÄ LogAnalyzer         - –ë–∞–∑–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

log_analyzer_advanced.py - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ AsyncLogParser      - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îú‚îÄ‚îÄ LogMonitor          - Real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚îú‚îÄ‚îÄ AlertManager        - –°–∏—Å—Ç–µ–º–∞ –∞–ª–µ—Ä—Ç–æ–≤
‚îú‚îÄ‚îÄ AdvancedLogFilter   - –°–ª–æ–∂–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ TimeSeriesAggregator- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã
‚îî‚îÄ‚îÄ DataExporter        - –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

log_visualizer.py        - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ ASCIIChart          - –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏
‚îú‚îÄ‚îÄ HTMLReportGenerator - HTML –æ—Ç—á–µ—Ç—ã
‚îî‚îÄ‚îÄ ConsoleVisualizer   - Dashboard –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
```

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **Single Responsibility** - –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å —Ä–µ—à–∞–µ—Ç –æ–¥–Ω—É –∑–∞–¥–∞—á—É
2. **Strategy Pattern** - —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
3. **Builder Pattern** - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
4. **Observer Pattern** - —Å–∏—Å—Ç–µ–º–∞ –∞–ª–µ—Ä—Ç–æ–≤
5. **Iterator Pattern** - streaming –æ–±—Ä–∞–±–æ—Ç–∫–∞

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã** –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ (—ç–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏)
- **Counter/defaultdict** –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–¥—Å—á–µ—Ç–∞
- **Async/await** –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–ë–∞—Ç—á–∏–Ω–≥** –ø—Ä–∏ streaming –æ–±—Ä–∞–±–æ—Ç–∫–µ

