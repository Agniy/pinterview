# Testing - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Python

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –∞—Å–ø–µ–∫—Ç–∞–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Python.

## üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

### [pytest/](pytest/)
–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ pytest - —Å–∞–º–æ–º—É –ø–æ–ø—É–ª—è—Ä–Ω–æ–º—É —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Python.

**–ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç:**
- üìñ –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ pytest
- üí° –ë–∞–∑–æ–≤—ã–µ –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–∏–º–µ—Ä—ã
- üîß –†–∞–±–æ—Ç–∞ —Å —Ñ–∏–∫—Å—Ç—É—Ä–∞–º–∏
- üéØ –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
- üî® –ú–æ–∫–∏ –∏ –ø–∞—Ç—á–∏
- ‚ö° –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- üìä –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

**–§–∞–π–ª—ã:**
- `README.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ pytest
- `QUICK_START.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `basics.py` + `test_basics.py` - –±–∞–∑–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã
- `advanced_examples.py` + `test_advanced.py` - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–∏–º–µ—Ä—ã
- `test_fixtures_demo.py` - –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ñ–∏–∫—Å—Ç—É—Ä
- `conftest.py` - –æ–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
- `pytest.ini` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
- `requirements.txt` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É pytest
cd testing/pytest

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
pytest

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
pytest --cov=. --cov-report=html
```

## üìñ –¢–∏–ø—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. **Unit Testing (–ú–æ–¥—É–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)**
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∫–æ–¥–∞ –≤ –∏–∑–æ–ª—è—Ü–∏–∏.

```python
def test_calculator_add():
    calc = Calculator()
    assert calc.add(2, 3) == 5
```

### 2. **Integration Testing (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)**
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏.

```python
def test_database_and_cache_integration(db, cache):
    db.insert('users', user_data)
    cache.set('user:1', user_data)
    assert db.select('users')[0] == cache.get('user:1')
```

### 3. **Functional Testing (–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)**
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### 4. **End-to-End Testing (E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)**
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞.

## üéØ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. **–°–ª–µ–¥—É–π—Ç–µ AAA –ø–∞—Ç—Ç–µ—Ä–Ω—É**
```python
def test_example():
    # Arrange (–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞)
    user = User("John")
    
    # Act (–î–µ–π—Å—Ç–≤–∏–µ)
    result = user.get_name()
    
    # Assert (–ü—Ä–æ–≤–µ—Ä–∫–∞)
    assert result == "John"
```

### 2. **–û–¥–∏–Ω —Ç–µ—Å—Ç - –æ–¥–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞**
```python
# ‚úÖ –•–æ—Ä–æ—à–æ
def test_user_name():
    assert user.name == "John"

def test_user_age():
    assert user.age == 30

# ‚ùå –ü–ª–æ—Ö–æ - —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ –æ–¥–Ω–æ–º —Ç–µ—Å—Ç–µ
def test_user():
    assert user.name == "John"
    assert user.age == 30
    assert user.email == "john@example.com"
    # ... –µ—â–µ 10 –ø—Ä–æ–≤–µ—Ä–æ–∫
```

### 3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞**
```python
# ‚úÖ –•–æ—Ä–æ—à–æ
def test_user_cannot_login_with_invalid_password():
    pass

# ‚ùå –ü–ª–æ—Ö–æ
def test_login():
    pass
```

### 4. **–ò–∑–æ–ª–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç—ã**
–ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º –∏ –Ω–µ –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥—Ä—É–≥–∏—Ö —Ç–µ—Å—Ç–æ–≤.

### 5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞**
```python
@pytest.fixture
def user():
    return User("John", age=30)

def test_user_name(user):
    assert user.name == "John"
```

### 6. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏**
```python
@pytest.mark.parametrize("value", [0, -1, 1, 999, 1000, 1001])
def test_validate_number(value):
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –≥—Ä–∞–Ω–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    pass
```

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### –§—Ä–µ–π–º–≤–æ—Ä–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- **pytest** ‚≠ê - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è (—Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π)
- **unittest** - –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ Python
- **nose2** - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ pytest
- **doctest** - –¢–µ—Å—Ç—ã –≤ docstrings

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞:
- **coverage.py** - –ò–∑–º–µ—Ä–µ–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞
- **pytest-cov** - –ü–ª–∞–≥–∏–Ω pytest –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è

### –ú–æ–∫–∏ –∏ –ø–∞—Ç—á–∏:
- **unittest.mock** - –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è –º–æ–∫–æ–≤
- **pytest-mock** - –ü–ª–∞–≥–∏–Ω pytest –¥–ª—è –º–æ–∫–æ–≤
- **responses** - –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- **freezegun** - –ó–∞–º–æ—Ä–æ–∑–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

### –î–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:
- **pytest-django** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Django
- **pytest-flask** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Flask
- **selenium** - E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞
- **playwright** - –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Selenium

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
- **faker** - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–µ–π–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **factory_boy** - –§–∞–±—Ä–∏–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- **hypothesis** - Property-based —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Ç–µ—Å—Ç–æ–≤

### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ (Code Coverage)
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=. --cov-report=html

# –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ: 80%+ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
# 100% –ø–æ–∫—Ä—ã—Ç–∏—è –Ω–µ –≤—Å–µ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
```

### –°–∫–æ—Ä–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Å–∞–º—ã–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest --durations=10

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
pytest -n auto
```

## üéì –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –∏–∑—É—á–µ–Ω–∏—è

1. **–ù–∞—á–Ω–∏—Ç–µ —Å pytest/QUICK_START.md** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
2. **–ò–∑—É—á–∏—Ç–µ pytest/README.md** - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
3. **–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ—Å—å —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏:**
   - `test_basics.py` - –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
   - `test_advanced.py` - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏
   - `test_fixtures_demo.py` - —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∏–∫—Å—Ç—É—Ä–∞–º–∏
4. **–ü–∏—à–∏—Ç–µ —Å–≤–æ–∏ —Ç–µ—Å—Ç—ã** –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- [Pytest Documentation](https://docs.pytest.org/)
- [Python Testing Guide](https://docs.python.org/3/library/unittest.html)
- [Testing Best Practices](https://realpython.com/python-testing/)

### –ö–Ω–∏–≥–∏:
- "Python Testing with pytest" by Brian Okken
- "Test-Driven Development with Python" by Harry Percival

### –°—Ç–∞—Ç—å–∏:
- [Real Python - Testing](https://realpython.com/python-testing/)
- [The Hitchhiker's Guide to Python - Testing](https://docs.python-guide.org/writing/tests/)

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### Test-Driven Development (TDD)
1. **Red** - –ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–∞–¥–∞–µ—Ç
2. **Green** - –ù–∞–ø–∏—à–∏—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥, —á—Ç–æ–±—ã —Ç–µ—Å—Ç –ø—Ä–æ—à–µ–ª
3. **Refactor** - –£–ª—É—á—à–∏—Ç–µ –∫–æ–¥

### Behavior-Driven Development (BDD)
–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –ø–æ–Ω—è—Ç–Ω–æ–º —è–∑—ã–∫–µ:
```gherkin
Given a user with name "John"
When the user logs in
Then the user should see the dashboard
```

### Property-Based Testing
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö:
```python
from hypothesis import given, strategies as st

@given(st.integers(), st.integers())
def test_add_commutative(a, b):
    assert add(a, b) == add(b, a)
```

## üö¶ CI/CD Integration

### GitHub Actions
```yaml
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Run tests
        run: |
          pip install -r requirements.txt
          pytest --cov=. --cov-report=xml
```

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –°–æ–≤–µ—Ç—ã –ø–æ —É—Å–∫–æ—Ä–µ–Ω–∏—é —Ç–µ—Å—Ç–æ–≤:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (`pytest-xdist`)
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π scope –¥–ª—è —Ñ–∏–∫—Å—Ç—É—Ä
3. –ú–æ–∫–∏—Ä—É–π—Ç–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (API, –ë–î)
4. –†–∞–∑–¥–µ–ª—è–π—Ç–µ –±—ã—Å—Ç—Ä—ã–µ –∏ –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã
pytest -m "not slow"
```

## üé® –°—Ç–∏–ª—å –∫–æ–¥–∞ –≤ —Ç–µ—Å—Ç–∞—Ö

```python
# ‚úÖ –•–æ—Ä–æ—à–æ - —á–∏—Ç–∞–µ–º—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π —Ç–µ—Å—Ç
def test_user_registration_with_valid_data():
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ø–µ—à–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
    """
    # Arrange
    user_data = {
        'username': 'john_doe',
        'email': 'john@example.com',
        'password': 'SecurePass123!'
    }
    
    # Act
    result = register_user(user_data)
    
    # Assert
    assert result.success is True
    assert result.user_id is not None

# ‚ùå –ü–ª–æ—Ö–æ - –Ω–µ—è—Å–Ω–æ —á—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è
def test1():
    assert register_user({'username': 'a', 'email': 'b', 'password': 'c'})
```

---

## üìù –ó–∞–º–µ—Ç–∫–∏

- –¢–µ—Å—Ç—ã - —ç—Ç–æ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è –≤ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- –•–æ—Ä–æ—à–∏–µ —Ç–µ—Å—Ç—ã —Å–ª—É–∂–∞—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- –¢–µ—Å—Ç—ã –ø–æ–º–æ–≥–∞—é—Ç –≤ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ
- 100% –ø–æ–∫—Ä—ã—Ç–∏–µ != 100% –∫–∞—á–µ—Å—Ç–≤–æ
- –ü–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ª–µ–≥–∫–æ —á–∏—Ç–∞—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

---

**–£–¥–∞—á–∏ –≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏! üöÄ**

